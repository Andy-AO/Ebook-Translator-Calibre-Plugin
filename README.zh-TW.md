# 電子書翻譯器（Calibre 插件）

一個可以將電子書翻譯成指定語言（原文譯文對照）的插件。

---

## 主要功能

* 支持所選翻譯引擎所支持的語言（如 Google 翻譯支持 134 種）
* 支持多種翻譯引擎，包括 Google 翻譯、ChatGPT 以及 DeepL
* 支持所有 Calibre 所支持的電子書格式（輸入格式 48 種，輸出格式 20 種）
* 支持批量翻譯電子書，每本書的翻譯過程同時進行互不影響
* 支持緩存翻譯內容，在請求失敗或網絡中斷後無需重新翻譯
* 提供大量自定義設置，如將翻譯的電子書存到 Calibre 書庫或指定位置

---

## 設置說明

__【輸出路徑】__

* 書庫 [默認]：電子書翻譯完成後會放入 Calibre 書庫中
* 路徑：電子書翻譯完成後會存放到指定目錄中

翻譯某本電子書時，需要注意所選取的輸出格式，如果所選屬輸出格式是書庫中已存在的格式，則作爲輸入的原格式文件會以重命名的方式進行備份。因此，不建議選擇與輸入格式相同的輸出格式，如果確實需要使用同一格式輸出，建議指定路徑。

__【翻譯引擎】__

* Google [默認]：免費的翻譯引擎
* ChatGPT：需要 API 密鑰
* DeepL：需要 API 密鑰
* DeepL(Pro)：需要 API 密鑰

注意，除了 Google 不需要 API 密鑰外，其他翻譯引擎都需要你註冊相應賬戶（可能需要付費）獲取 API 密鑰才能使用。另外，由於插件在開發時缺少 DeepL 的 API 密鑰，根據其官網提供的響應信息樣例，程序可以正常運行，實際運行情況未知。

如果選擇使用需要付費的翻譯引擎，建議前往相應的官方文檔查看計費規則。比如，ChatGPT，可以使用其官方提供的工具 [Tokenizer](https://platform.openai.com/tokenizer) 估算要翻譯字數大約會消耗多少 token 以便預估費用。

__【網絡代理】__

* 開啓 [默認不勾選]：開啓網絡代理
* 主機：支持 IP 和域名
* 端口：範圍 0-65536
* 測試：測試代理的連通性

__【緩存】__

* 開啓 [默認勾選]：開啓翻譯內容的緩存功能
* 清除：刪除所有緩存

開啓緩存功能可以避免請求失敗或網絡中斷後對已翻譯過的內容進行重新翻譯。另外，你還可以在這裏看到緩存對磁盤空間的佔用量，點擊【清除】按鈕可刪除所有緩存。注意，如果當前有正在進行的翻譯任務，則清除按鈕不可用。

__【請求】__

* 重試次數 [默認 3 次]：當請求翻譯引擎失敗後要重試的次數
* 最大間隔 [默認 5 秒]：向翻譯引擎發送請求的最大時間間隔

插件對翻譯引擎的每次請求最長可持續 300 秒，超時後會按照指定的次數進行重試，每次重試的等待時間會逐次加長。請求的時間間隔爲 0 到指定最大間隔之間的隨機數。

對於 Google 翻譯這種目前可以免費使用的接口，建議酌情加長時間間隔（建議 5 秒以上），以免被 Google 翻譯視爲濫用，從而導致翻譯中斷或拒絕服務。付費翻譯引擎則可以直接設爲 0。

__【日誌】__

* 顯示翻譯 [默認勾選]：可以在翻譯任務各自的日誌窗口實時查看翻譯內容

---

## 許可證

[GNU General Public License v3.0](https://www.gnu.org/licenses/gpl-3.0.en.html)

---

* GitHub：[https://github.com/bookfere/Ebook-Translator-Calibre-Plugin](https://github.com/bookfere/Ebook-Translator-Calibre-Plugin)
* 發佈頁面：[https://bookfere.com/post/1057.html](https://bookfere.com/post/1057.html)
* 讚賞頁面：[https://bookfere.com/donate](https://bookfere.com/donate)
