# 电子书翻译器（Calibre 插件）

一个可以将电子书翻译成指定语言（原文译文对照）的插件。

---

## 主要功能

* 支持所选翻译引擎所支持的语言（如 Google 翻译支持 134 种）
* 支持多种翻译引擎，包括 Google 翻译、ChatGPT 以及 DeepL
* 支持所有 Calibre 所支持的电子书格式（输入格式 48 种，输出格式 20 种）
* 支持批量翻译电子书，每本书的翻译过程同时进行互不影响
* 支持缓存翻译内容，在请求失败或网络中断后无需重新翻译
* 提供大量自定义设置，如将翻译的电子书存到 Calibre 书库或指定位置

---

## 设置说明

__【输出路径】__

* 书库 [默认]：电子书翻译完成后会放入 Calibre 书库中
* 路径：电子书翻译完成后会存放到指定目录中

翻译某本电子书时，需要注意所选取的输出格式，如果所选属输出格式是书库中已存在的格式，则作为输入的原格式文件会以重命名的方式进行备份。因此，不建议选择与输入格式相同的输出格式，如果确实需要使用同一格式输出，建议指定路径。

__【翻译引擎】__

* Google [默认]：免费的翻译引擎
* ChatGPT：需要 API 密钥
* DeepL：需要 API 密钥
* DeepL(Pro)：需要 API 密钥

注意，除了 Google 不需要 API 密钥外，其他翻译引擎都需要你注册相应账户（可能需要付费）获取 API 密钥才能使用。另外，由于插件在开发时缺少 DeepL 的 API 密钥，根据其官网提供的响应信息样例，程序可以正常运行，实际运行情况未知。

如果选择使用需要付费的翻译引擎，建议前往相应的官方文档查看计费规则。比如，ChatGPT，可以使用其官方提供的工具 [Tokenizer](https://platform.openai.com/tokenizer) 估算要翻译字数大约会消耗多少 token 以便预估费用。

__【网络代理】__

* 开启 [默认不勾选]：开启网络代理
* 主机：支持 IP 和域名
* 端口：范围 0-65536
* 测试：测试代理的连通性

__【缓存】__

* 开启 [默认勾选]：开启翻译内容的缓存功能
* 清除：删除所有缓存

开启缓存功能可以避免请求失败或网络中断后对已翻译过的内容进行重新翻译。另外，你还可以在这里看到缓存对磁盘空间的占用量，点击【清除】按钮可删除所有缓存。注意，如果当前有正在进行的翻译任务，则清除按钮不可用。

__【请求】__

* 重试次数 [默认 3 次]：当请求翻译引擎失败后要重试的次数
* 最大间隔 [默认 5 秒]：向翻译引擎发送请求的最大时间间隔

插件对翻译引擎的每次请求最长可持续 300 秒，超时后会按照指定的次数进行重试，每次重试的等待时间会逐次加长。请求的时间间隔为 0 到指定最大间隔之间的随机数。

对于 Google 翻译这种目前可以免费使用的接口，建议酌情加长时间间隔（建议 5 秒以上），以免被 Google 翻译视为滥用，从而导致翻译中断或拒绝服务。付费翻译引擎则可以直接设为 0。

__【日志】__

* 显示翻译 [默认勾选]：可以在翻译任务各自的日志窗口实时查看翻译内容

---

## 许可证

[GNU General Public License v3.0](https://www.gnu.org/licenses/gpl-3.0.en.html)

---

* GitHub：[https://github.com/bookfere/Ebook-Translator-Calibre-Plugin](https://github.com/bookfere/Ebook-Translator-Calibre-Plugin)
* 发布页面：[https://bookfere.com/post/1057.html](https://bookfere.com/post/1057.html)
* 赞赏页面：[https://bookfere.com/donate](https://bookfere.com/donate)
